@model IEnumerable<QuestionnaireViewModel>

@{
    ViewData["Title"] = "Questionnaire";
}


<div class="container-fluid mt-3">

    <partial name="_Notification" />

    <div class="card bg-default shadow ">
        <div class="card-header">Questionnaire</div>
        <div class="card-body">
            <h4 class="card-title">Questionnaire list</h4>
            <p>
                <a asp-action="Create" class="btn btn-primary"><span><i class="bi bi-plus-square-fill"></i></span> Create New</a>
            </p>
            <table class="table table-responsive w-100 d-block d-md-table table-hover">
                <thead >
                    <tr>

                        <th>Id</th>
                        <th>Title</th>
                        <th>Total Questions</th>
                        <th> <span class="badge badge-primary">Questions</span> | <span class="badge badge-info">Type</span> | <span class="badge badge-success">Answers </span></th>
                       
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody class="w-100">
                    @foreach (var item in Model)
                    {
                        <tr class="table-secondary">

                            <td>@item.Id</td>

                                <td>
                                    @item.Title
                                </td>
                           

                            <td>
                               
                                <span class="badge shadow rounded text-bg-primary p-2">
                                    Questions <span class="badge text-bg-secondary shadow rounded p-1">@item.Questions?.Count()</span>
                                </span>
                               
                            </td>
                            <td class="h5">
                                
                                @foreach (var question in item.Questions.Take(1))
                                {
                                    
                                     <span class="badge p-1 m-1 bg-primary shadow-sm"> Question:@question.Text</span>
                                    <span class="badge p-1 m-1 bg-info shadow-sm">Type: @question.Type</span>
                                    foreach (var answer in question.Answers)
                                    {
                                        <span class="badge p-1 m-1 bg-success shadow-sm"> Asnwer:@answer.Text</span>

                                        
                                    }
                               
                                }
                              
                            </td>

                            <td>
                                <!-- Your existing buttons -->
                                <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger btn-sm">
                                    🗑️ DELETE
                                </a>
                                <a asp-action="Edit" asp-route-id="@item.Id" class="btn btn-primary btn-sm">
                                    ✏️ EDIT
                                </a>
                                <a asp-action="Details" asp-route-id="@item.Id" class="btn btn-info btn-sm">
                                    👁️ DETAILS
                                </a>
                                <a asp-action="SendQuestionnaire" asp-route-id="@item.Id" class="btn btn-success btn-sm">
                                    📧 SEND
                                </a>

                                <!-- NEW: SET LOGIC button with purple/orange styling -->
                                <a asp-action="SetLogic" asp-route-id="@item.Id" class="btn btn-sm" style="background-color: #6f42c1; color: white;">
                                    🔀 SET LOGIC
                                </a>
                            </td>
                        </tr>
                    }

                </tbody>
            </table>

        </div>
    </div>
</div>

